# TODO

- ~~generate 64-bit opaque session token~~
- ~~bind a D1 instance for session storage~~
- ~~add GET/PUT routing at root path~~
- ~~check authz for each route~~
- ~~bind an R2 instance for object storage~~
- ~~read/write object on request~~
- ~~read object in frontend app~~
- ~~write similar find-user-id fn that also checks length of session id~~

- AUTHN
  - decouple from authn providers
  - session listing for current user (new endpoint)
- PERF
  - speed up session db via index? or redis?
- SECURITY
  - COOKIE
    - limit number of sessions (x5; FIFO)?
    - investigate samesite / crossorigin
    - rolling session expiry (every request bumps the expiry time)
    - periodic session ID rotation (request after 1h forces ID rotation)
    - absolute timeout of 30 days (end of rolling expiry; authn required)
    - TODO: figure out how this actually works...
      - ChatGPT describes having a persistent "remember me" cookie
      - think i'm getting confused between literal user session cookie that clears on browser close, and the general concept of sessions and cookies used to establish them
    - bind to other client info, e.g. user-agent... and reject + remove session on fail
    - https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html#logging-sessions-life-cycle-monitoring-creation-usage-and-destruction-of-session-ids
  - OBJECT PAYLOAD
    - max size
    - encryption
    - xss prevention
    - antivirus approach required?
- PIPELINE
  - add tests (use vite)
  - add ci/cd stuff instead of cli deploy
